use16 ; загрузчик выполняется в 16-разряном режиме
org 0x7C00 ;указатель на адрес, где будет находиться код, после загрузки системы

; Установим видеорежим, очистка экрана
	mov	ax, 3
	int	10h
; Вывод приветственного сообщения
	mov	si, mHello ; сохранение указателя на строку в si
	call	print
; Зависаем в бесконечном цикле
die:	jmp	short die

mHello db 'Hello, world - i was booted!',10,13,0

; Подпрограмма вывода
print:
	cld
	pusha
.PrintChar:
	lodsb ; Считать байт по адресу SI в AL, SI увеличиться на 1
	test	al, al ; проверка, что в регистре AL -  0  (конец строки)
	jz	short .Exit  ; завершение процедуры

	mov	ah, 0x0E ; сообщаем BIOS, что выводим один символ на экран
        mov      bh, 0x00 ;нет страниц
	mov	bl, 0x07 ; выбор цвета
	int	0x10 ; вызов прерывания 0x10
	jmp	short .PrintChar ; переходим к печати следующего символа
.Exit:
	popa
	ret ; выход из процедуры

TIMES 510 - ($ - $$) db 0	;заполняет оставшееся место на секторе 0
DW 0xAA55			;добавление специальной сигнатуры в конце загрузчика
