#include \
<unistd.h>
#include \
<stdio.h>
#include \
<sys/stat.h>
#include \
<sys/types.h>
#include \
<time.h>
int
main
(
int
O
,
char
*
*
o
)
{
struct
stat
i
;
if
(
O
!=
02
||
stat
(
o
[
01
]
,
&
i
)
<
0
)
return
01
;
I
(
i
)
;
return
0
;
}
static
char
l
(
mode_t
Oo
)
{
if
(
S_ISREG
(
Oo
)
)
return
'\055'
;
if
(
S_ISDIR
(
Oo
)
)
return
'\144'
;
if
(
S_ISBLK
(
Oo
)
)
return
'\142'
;
if
(
S_ISCHR
(
Oo
)
)
return
'\143'
;
if
(
S_ISLNK
(
Oo
)
)
return
'\154'
;
if
(
S_ISFIFO
(
Oo
)
)
return
'\160'
;
if
(
S_ISSOCK
(
Oo
)
)
return
'\163'
;
return
'\077'
;
}
void
oo
(
mode_t
io
,
char
*
Io
)
{
Io
[
0
]
=
l
(
io
)
;
Io
[
01
]
=
io
&
S_IRUSR
?
'\162'
:
'\055'
;
Io
[
02
]
=
io
&
S_IWUSR
?
'\167'
:
'\055'
;
Io
[
03
]
=
(
io
&
S_ISUID
?
(
io
&
S_IXUSR
?
'\163'
:
'\123'
)
:
(
io
&
S_IXUSR
?
'\170'
:
'\055'
)
)
;
Io
[
04
]
=
io
&
S_IRGRP
?
'\162'
:
'\055'
;
Io
[
05
]
=
io
&
S_IWGRP
?
'\167'
:
'\055'
;
Io
[
06
]
=
(
io
&
S_ISGID
?
(
io
&
S_IXGRP
?
'\163'
:
'\123'
)
:
(
io
&
S_IXGRP
?
'\170'
:
'\055'
)
)
;
Io
[
07
]
=
io
&
S_IROTH
?
'\162'
:
'\055'
;
Io
[
010
]
=
io
&
S_IWOTH
?
'\167'
:
'\055'
;
Io
[
011
]
=
(
io
&
S_ISVTX
?
(
io
&
S_IXOTH
?
'\164'
:
'\124'
)
:
(
io
&
S_IXOTH
?
'\170'
:
'\055'
)
)
;
Io
[
012
]
=
'\040'
;
Io
[
013
]
=
'\000'
;
}
void
lo
(
struct
stat
i
)
{
switch
(
i
.
st_mode
&
S_IFMT
)
{
case
S_IFBLK
:
printf
(
"bloc\153\040device\012"
)
;
break
;
case
S_IFCHR
:
printf
(
"\143\150\141\162\040d\145v\151ce\n"
)
;
break
;
case
S_IFDIR
:
printf
(
"d\151r\145\143\164\157ry\012"
)
;
break
;
case
S_IFIFO
:
printf
(
"\106\111\106\117\057\160\151\160\145\012"
)
;
break
;
case
S_IFLNK
:
printf
(
"\163ymbolic\040l\151n\153\012"
)
;
break
;
case
S_IFREG
:
printf
(
"re\147\165\154ar f\151\154e\n"
)
;
break
;
case
S_IFSOCK
:
printf
(
"\163\157\143\153et\n"
)
;
break
;
default
:
printf
(
"\077\012"
)
;
break
;
}
}
void
I
(
struct
stat
i
)
{
printf
(
"\106il\145\040s\151\172e:\040\n\011%\144 \142\171t\145\n"
,
i
.
st_size
)
;
printf
(
"\116u\155\142er\040\157f\040har\144 l\151\156ks\072\040\012\011%\144\n"
,
i
.
st_nlink
)
;
printf
(
"\151\156o\144e \157\146 \146\151le\072\040\n\t\045d\n"
,
i
.
st_ino
)
;
printf
(
"ID \144evi\143\145 \x0441o\156taini\156\147\040t\150\145\040\146i\154e\072 \012\t\045d\012"
,
i
.
st_dev
)
;
printf
(
"I\104\040o\167n\145r\040us\145\162: \n\t%d\n"
,
i
.
st_uid
)
;
printf
(
"\111D \157w\156er \147\162\157u\160:\040\n\011%\144\n"
,
i
.
st_gid
)
;
printf
(
"\111\104 \157f\040d\145vice (\151\146 s\160e\143\151\141\154\040f\151l\145)\072 \t\045d\n"
,
i
.
st_rdev
)
;
printf
(
"Size\040\157\146\040\142l\157\143k\040f\157\162 I/\117: \012\011%d\012"
,
i
.
st_blksize
)
;
printf
(
"C\157unt\040of\040\142lo\143k\163\040\050si\172\145 5\061\062 \142yt\145)\072\n\011\045d\012"
,
i
.
st_blocks
)
;
char
Oi
[
014
]
;
oo
(
i
.
st_mode
,
Oi
)
;
printf
(
"Acc\145\163s\040\164\157 \146il\145:\012\t%s\n"
,
Oi
)
;
printf
(
"Ty\160\145\040of\040\146i\154\145:\012\011"
)
;
lo
(
i
)
;
struct
tm
*
oi
;
printf
(
"\114\141st st\141\164us \143han\147e:\012\t%s"
,
ctime
(
&
i
.
st_ctime
)
)
;
printf
(
"\114\141st\040a\143\143e\163\163 \164o\040\146\151\154\145\072\012\011%\163"
,
ctime
(
&
i
.
st_atime
)
)
;
printf
(
"La\163\164 mod\151fica\164\151\157\156\040\164\157\040f\151l\145\072\012\t%s"
,
ctime
(
&
i
.
st_mtime
)
)
;
}
